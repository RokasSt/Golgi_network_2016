<Lems>

    

    <Target component="sim1"/>

    <Include file="NeuroMLCoreDimensions.xml"/>
    <Include file="Cells.xml"/>
    <Include file="Networks.xml"/>
    <Include file="Simulation.xml"/>
    <Include file="LEMS_multi_component.xml"/>
    
   <expThreeSynapse id="MFSpikeSyn" gbase1="1.5nS" tauRise="0.1ms" tauDecay1="0.7ms" gbase2="0.5nS" tauDecay2="2.5ms"  erev="0mV"/> 
   
   <transientPoissonFiringSynapse id="input0" delay="50ms" duration="500ms" averageRate="10 Hz" synapse="MFSpikeSyn" spikeTarget="./MFSpikeSyn"/>


    <iafCell id="iaf1" leakReversal="-60mV" thresh="-40mV" reset="-65mV" C="1e-5uF" leakConductance="5e-7mS"/>
    <iafCell id="iaf2" leakReversal="-60mV" thresh="-40mV" reset="-70mV" C="1e-5uF" leakConductance="5.2e-7mS"/>


    <spikeArray id="spkArr">
      <spike id="0" time="50 ms"/>
      <spike id="1" time="100 ms"/>
      <spike id="2" time="150 ms"/>
      <spike id="3" time="155 ms"/>
      <spike id="4" time="250 ms"/>
    </spikeArray>


    <network id="net2">

       

        <population id="Pop0" component="spkArr" size="1"/>
        <population id="Pop1" component="iaf1" size="1"/>
        <population id="Pop2" component="iaf1" size="1"/>
        
         <synapticConnection from="Pop0[0]" to="Pop1[0]" synapse="MFSpikeSyn" destination="synapses"/>

         <inputList id="stimInput" component="input0" population="Pop2">
           
            <input id="0" target="../Pop2[0]" destination="synapses"/>
        </inputList>



    </network>

    

    <Simulation id="sim1" length="600ms" step="0.005ms" target="net2">

        

        <Display id="d1" title="Test spike time inputs" timeScale="1ms" xmin="0" xmax="600" ymin="-100" ymax="20">
            
            <Line id="pop1" quantity="Pop1[0]/v" scale="1mV" color="#00ff00" timeScale="1ms"/>
            
            
            
        </Display>

         <Display id="d2" title="Poissson synapse tsince" timeScale="1ms" xmin="0" xmax="600" ymin="-20" ymax="700">
            
           <Line id ="poison firing synapse time since" quantity="Pop2[0]/input0/tsince" scale="1ms" color="#3fffaa" timeScale="1ms"/>
            
            
        </Display>
 
        <Display id="d3" title="Poissson synapse v" timeScale="1ms" xmin="0" xmax="600" ymin="-100" ymax="700">
            
           <Line id ="Poisson synapse voltage" quantity="Pop2[0]/input0/v" scale="1ms" color="#3fffaa" timeScale="1ms"/>
            
            
        </Display>
 
        

        <EventOutputFile id="Input_spikes" fileName="results/Input_spikes" format="ID_TIME">
            <EventSelection id="0" select="Pop0[0]" eventPort="spike"/>
        </EventOutputFile>

       
        <EventOutputFile id="Input_spikes" fileName="results/Input_spikesPoisson" format="ID_TIME">
            <EventSelection id="0" select="Pop2[0]/input0" eventPort="spike"/>
        </EventOutputFile>
       
    </Simulation>


</Lems>

  


